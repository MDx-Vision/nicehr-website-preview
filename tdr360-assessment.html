<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDR360™ Go-Live Readiness Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #fff;
            color: #1a1a1a;
            min-height: 100vh;
            line-height: 1.5;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 64px;
            border-bottom: 1px solid #e5e5e5;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .brand-logo-primary {
            height: 80px;
            width: auto;
        }

        .brand-logo {
            height: 50px;
            width: auto;
        }

        .brand-divider {
            width: 1px;
            height: 50px;
            background: #e5e5e5;
        }

        .methodology-badge {
            text-align: right;
        }

        .methodology-name {
            font-size: 18px;
            font-weight: 600;
            color: #1a1a1a;
        }

        .methodology-tm {
            font-size: 9px;
            vertical-align: super;
            color: #666;
        }

        .methodology-sub {
            font-size: 10px;
            color: #666;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            padding: 48px 24px;
        }

        .hero {
            text-align: center;
            margin-bottom: 48px;
        }

        .hero h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .hero p {
            font-size: 16px;
            color: #666;
            max-width: 500px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e5e5;
            border-radius: 2px;
            margin-bottom: 48px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #1a1a1a;
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-container {
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .question-number {
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #888;
            margin-bottom: 12px;
        }

        .question-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 32px;
            line-height: 1.3;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 20px 24px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option:hover {
            border-color: #1a1a1a;
            background: #fafafa;
        }

        .option.selected {
            border-color: #1a1a1a;
            background: #1a1a1a;
            color: #fff;
        }

        .option-circle {
            width: 20px;
            height: 20px;
            border: 2px solid #ccc;
            border-radius: 50%;
            margin-right: 16px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option.selected .option-circle {
            border-color: #fff;
            background: #fff;
        }

        .option.selected .option-circle::after {
            content: '';
            width: 10px;
            height: 10px;
            background: #1a1a1a;
            border-radius: 50%;
        }

        .option-text {
            font-size: 16px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 48px;
        }

        .btn {
            padding: 14px 32px;
            font-size: 14px;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #1a1a1a;
        }

        .btn-secondary:hover {
            background: #e5e5e5;
        }

        .btn-primary {
            background: #1a1a1a;
            color: #fff;
        }

        .btn-primary:hover {
            background: #333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Lead Form */
        .lead-form {
            display: none;
        }

        .lead-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 14px 16px;
            font-size: 16px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            outline: none;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: #1a1a1a;
        }

        /* Results */
        .results {
            display: none;
            text-align: center;
        }

        .results.active {
            display: block;
        }

        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 32px;
        }

        .score-circle.go {
            background: #1a1a1a;
            color: #fff;
        }

        .score-circle.conditional {
            background: #666;
            color: #fff;
        }

        .score-circle.nogo {
            background: #e5e5e5;
            color: #1a1a1a;
        }

        .score-number {
            font-size: 48px;
            font-weight: 600;
            line-height: 1;
        }

        .score-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 8px;
        }

        .result-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .result-description {
            font-size: 16px;
            color: #666;
            max-width: 500px;
            margin: 0 auto 32px;
            line-height: 1.7;
        }

        .result-cta {
            display: inline-block;
            padding: 16px 40px;
            background: #1a1a1a;
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .result-cta:hover {
            background: #333;
        }

        .breakdown {
            margin-top: 48px;
            text-align: left;
            background: #fafafa;
            padding: 32px;
            border-radius: 12px;
        }

        .breakdown h3 {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #888;
            margin-bottom: 24px;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e5e5;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .breakdown-domain {
            font-weight: 500;
        }

        .breakdown-score {
            font-weight: 600;
        }

        .breakdown-score.high { color: #1a1a1a; }
        .breakdown-score.medium { color: #666; }
        .breakdown-score.low { color: #999; }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 16px;
                padding: 16px 24px;
            }
            .brand-logo-primary { height: 60px; }
            .brand-logo { height: 40px; }
            .methodology-badge { text-align: center; }
            .hero h1 { font-size: 26px; }
            .question-text { font-size: 20px; }
            .container { padding: 32px 20px; }
        }

        .legal {
            text-align: center;
            padding: 24px;
            font-size: 11px;
            color: #999;
            border-top: 1px solid #e5e5e5;
            margin-top: 48px;
        }
    </style>
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        // TODO: Replace with your EmailJS credentials
        const EMAILJS_PUBLIC_KEY = 'YOUR_PUBLIC_KEY';
        const EMAILJS_SERVICE_ID = 'YOUR_SERVICE_ID';
        const EMAILJS_TEMPLATE_ID = 'YOUR_TEMPLATE_ID';

        (function() {
            emailjs.init(EMAILJS_PUBLIC_KEY);
        })();
    </script>
</head>
<body>
    <header class="header">
        <div class="brand">
            <img src="images/tdr/nicehr-logo.png" alt="The NiceHR Group" class="brand-logo-primary">
            <div class="brand-divider"></div>
            <img src="images/tdr/jbi-logo.png" alt="JBI" class="brand-logo">
        </div>
        <div class="methodology-badge">
            <div class="methodology-name">TDR360<span class="methodology-tm">™</span></div>
            <div class="methodology-sub">Readiness Assessment</div>
        </div>
    </header>

    <div class="container">
        <div class="hero">
            <h1>Go-Live Readiness Assessment</h1>
            <p>Answer 8 questions to see where your organization stands. Takes 2 minutes.</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- Questions -->
        <div class="question-container active" data-question="1" data-domain="infrastructure">
            <div class="question-number">Question 1 of 8</div>
            <div class="question-text">How would you describe your current go-live documentation?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Centralized system with real-time updates</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Shared drives with regular manual updates</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Scattered across email, spreadsheets, and folders</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">No standardized documentation process</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="2" data-domain="infrastructure">
            <div class="question-number">Question 2 of 8</div>
            <div class="question-text">How do stakeholders currently track go-live readiness?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Live dashboard with automated scoring</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Weekly status reports via email</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Ad-hoc updates in meetings</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">No formal tracking process</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="3" data-domain="integrations">
            <div class="question-number">Question 3 of 8</div>
            <div class="question-text">What is the status of your interface testing?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">All interfaces tested end-to-end with sign-off</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Most interfaces tested, some pending</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Testing in progress, many gaps</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">Interface testing not yet started</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="4" data-domain="data">
            <div class="question-number">Question 4 of 8</div>
            <div class="question-text">How confident are you in your data migration validation?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Full validation complete with reconciliation reports</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Sample validation done, full validation planned</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Limited testing, validation criteria undefined</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">No validation process in place</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="5" data-domain="workflows">
            <div class="question-number">Question 5 of 8</div>
            <div class="question-text">Have clinical workflows been validated with end users?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">All critical workflows tested and signed off by users</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Key workflows tested, some refinements needed</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Limited user involvement in workflow testing</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">Workflows not yet tested with end users</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="6" data-domain="workflows">
            <div class="question-number">Question 6 of 8</div>
            <div class="question-text">What is the status of your downtime procedures?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Documented, tested, and staff trained</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Documented but not fully tested</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">In development, not documented</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">No downtime procedures defined</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="7" data-domain="support">
            <div class="question-number">Question 7 of 8</div>
            <div class="question-text">How prepared is your go-live support team?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Fully staffed, trained, and rehearsed</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">Team identified, training in progress</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Some resources identified, gaps remain</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">Support planning not started</div>
                </div>
            </div>
        </div>

        <div class="question-container" data-question="8" data-domain="support">
            <div class="question-number">Question 8 of 8</div>
            <div class="question-text">Do you have clear go/no-go decision criteria?</div>
            <div class="options">
                <div class="option" data-score="3">
                    <div class="option-circle"></div>
                    <div class="option-text">Defined criteria with executive sign-off process</div>
                </div>
                <div class="option" data-score="2">
                    <div class="option-circle"></div>
                    <div class="option-text">General criteria discussed, not formalized</div>
                </div>
                <div class="option" data-score="1">
                    <div class="option-circle"></div>
                    <div class="option-text">Informal understanding, no documentation</div>
                </div>
                <div class="option" data-score="0">
                    <div class="option-circle"></div>
                    <div class="option-text">No go/no-go criteria established</div>
                </div>
            </div>
        </div>

        <!-- Lead Form -->
        <div class="lead-form" id="leadForm">
            <div class="question-number">Almost Done</div>
            <div class="question-text">Where should we send your results?</div>
            <form id="contactForm">
                <div class="form-group">
                    <label for="name">Full Name *</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Work Email *</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="organization">Organization *</label>
                    <input type="text" id="organization" name="organization" required>
                </div>
                <div class="form-group">
                    <label for="role">Your Role</label>
                    <select id="role" name="role">
                        <option value="">Select...</option>
                        <option value="cio">CIO / IT Executive</option>
                        <option value="director">IT Director / Manager</option>
                        <option value="pm">Project Manager</option>
                        <option value="analyst">Analyst / Specialist</option>
                        <option value="consultant">Consultant</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ehr">EHR System</label>
                    <select id="ehr" name="ehr">
                        <option value="">Select...</option>
                        <option value="epic">Epic</option>
                        <option value="cerner">Cerner / Oracle Health</option>
                        <option value="meditech">MEDITECH</option>
                        <option value="veradigm">Veradigm</option>
                        <option value="athena">Athenahealth</option>
                        <option value="ecw">eClinicalWorks</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </form>
        </div>

        <!-- Results -->
        <div class="results" id="results">
            <div class="score-circle" id="scoreCircle">
                <div class="score-number" id="scoreNumber">0%</div>
                <div class="score-label" id="scoreLabel">Score</div>
            </div>
            <h2 class="result-title" id="resultTitle">Your Result</h2>
            <p class="result-description" id="resultDescription">Description here.</p>
            <a href="mailto:info@nicehrgroup.com?subject=TDR360%20Assessment%20Follow-Up" class="result-cta">Talk to an Expert</a>

            <div class="breakdown">
                <h3>Score Breakdown by Domain</h3>
                <div class="breakdown-item">
                    <span class="breakdown-domain">Documentation & Tracking</span>
                    <span class="breakdown-score" id="score-infrastructure">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-domain">Interface Testing</span>
                    <span class="breakdown-score" id="score-integrations">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-domain">Data Migration</span>
                    <span class="breakdown-score" id="score-data">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-domain">Workflows & Procedures</span>
                    <span class="breakdown-score" id="score-workflows">0%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-domain">Support Readiness</span>
                    <span class="breakdown-score" id="score-support">0%</span>
                </div>
            </div>
        </div>

        <div class="nav-buttons" id="navButtons">
            <button class="btn btn-secondary" id="prevBtn" disabled>Back</button>
            <button class="btn btn-primary" id="nextBtn" disabled>Next</button>
        </div>
    </div>

    <footer class="legal">
        &copy; 2026 The NiceHR Group. TDR360 is a trademark of The NiceHR Group.
    </footer>

    <script>
        const questions = document.querySelectorAll('.question-container');
        const progressFill = document.getElementById('progressFill');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const leadForm = document.getElementById('leadForm');
        const results = document.getElementById('results');
        const navButtons = document.getElementById('navButtons');

        let currentQuestion = 0;
        let answers = {};
        const totalQuestions = questions.length;

        function updateProgress() {
            const progress = ((currentQuestion + 1) / (totalQuestions + 1)) * 100;
            progressFill.style.width = progress + '%';
        }

        function showQuestion(index) {
            questions.forEach((q, i) => {
                q.classList.toggle('active', i === index);
            });
            leadForm.classList.remove('active');
            results.classList.remove('active');
            navButtons.style.display = 'flex';

            prevBtn.disabled = index === 0;
            updateNextButton();
            updateProgress();
        }

        function showLeadForm() {
            questions.forEach(q => q.classList.remove('active'));
            leadForm.classList.add('active');
            results.classList.remove('active');
            navButtons.style.display = 'flex';
            prevBtn.disabled = false;
            nextBtn.textContent = 'See Results';
            nextBtn.disabled = false;
            progressFill.style.width = '90%';
        }

        function calculateScores() {
            const domainScores = {
                infrastructure: { total: 0, max: 0 },
                integrations: { total: 0, max: 0 },
                data: { total: 0, max: 0 },
                workflows: { total: 0, max: 0 },
                support: { total: 0, max: 0 }
            };

            questions.forEach((q, i) => {
                const domain = q.dataset.domain;
                const score = answers[i] || 0;
                domainScores[domain].total += score;
                domainScores[domain].max += 3;
            });

            let totalScore = 0;
            let totalMax = 0;

            for (const domain in domainScores) {
                const pct = Math.round((domainScores[domain].total / domainScores[domain].max) * 100);
                document.getElementById('score-' + domain).textContent = pct + '%';
                document.getElementById('score-' + domain).className = 'breakdown-score ' +
                    (pct >= 80 ? 'high' : pct >= 60 ? 'medium' : 'low');
                totalScore += domainScores[domain].total;
                totalMax += domainScores[domain].max;
            }

            return Math.round((totalScore / totalMax) * 100);
        }

        function showResults() {
            const score = calculateScores();

            questions.forEach(q => q.classList.remove('active'));
            leadForm.classList.remove('active');
            results.classList.add('active');
            navButtons.style.display = 'none';
            progressFill.style.width = '100%';

            const scoreCircle = document.getElementById('scoreCircle');
            const scoreNumber = document.getElementById('scoreNumber');
            const scoreLabel = document.getElementById('scoreLabel');
            const resultTitle = document.getElementById('resultTitle');
            const resultDescription = document.getElementById('resultDescription');

            scoreNumber.textContent = score + '%';

            if (score >= 80) {
                scoreCircle.className = 'score-circle go';
                scoreLabel.textContent = 'GO';
                resultTitle.textContent = 'You\'re Ready';
                resultDescription.textContent = 'Your organization shows strong readiness across all domains. You have the documentation, testing, and support infrastructure in place. Consider TDR360 to maintain visibility and ensure nothing slips through the cracks before go-live.';
            } else if (score >= 60) {
                scoreCircle.className = 'score-circle conditional';
                scoreLabel.textContent = 'CONDITIONAL';
                resultTitle.textContent = 'Almost There';
                resultDescription.textContent = 'You have a solid foundation but gaps remain. Review the breakdown below to identify areas needing attention. TDR360 can help you track remediation and build confidence before your go-live decision.';
            } else {
                scoreCircle.className = 'score-circle nogo';
                scoreLabel.textContent = 'AT RISK';
                resultTitle.textContent = 'Critical Gaps Identified';
                resultDescription.textContent = 'Your current readiness level indicates significant risk. Multiple domains need immediate attention before proceeding. A TDR360 assessment can help prioritize remediation and establish clear criteria for a safe go-live.';
            }
        }

        function sendLeadEmail(leadData, scoreData) {
            const templateParams = {
                // Lead info
                to_email: 'info@nicehrgroup.com',
                lead_name: leadData.name,
                lead_email: leadData.email,
                lead_organization: leadData.organization,
                lead_role: leadData.role || 'Not specified',
                lead_ehr: leadData.ehr || 'Not specified',
                // Score info
                total_score: scoreData.total + '%',
                score_status: scoreData.status,
                score_infrastructure: scoreData.infrastructure + '%',
                score_integrations: scoreData.integrations + '%',
                score_data: scoreData.data + '%',
                score_workflows: scoreData.workflows + '%',
                score_support: scoreData.support + '%',
                assessment_date: new Date().toLocaleDateString()
            };

            emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams)
                .then(function(response) {
                    console.log('Email sent:', response.status);
                }, function(error) {
                    console.error('Email failed:', error);
                });
        }

        function getScoreData() {
            const domainScores = {
                infrastructure: { total: 0, max: 0 },
                integrations: { total: 0, max: 0 },
                data: { total: 0, max: 0 },
                workflows: { total: 0, max: 0 },
                support: { total: 0, max: 0 }
            };

            questions.forEach((q, i) => {
                const domain = q.dataset.domain;
                const score = answers[i] || 0;
                domainScores[domain].total += score;
                domainScores[domain].max += 3;
            });

            let totalScore = 0;
            let totalMax = 0;
            const result = {};

            for (const domain in domainScores) {
                const pct = Math.round((domainScores[domain].total / domainScores[domain].max) * 100);
                result[domain] = pct;
                totalScore += domainScores[domain].total;
                totalMax += domainScores[domain].max;
            }

            result.total = Math.round((totalScore / totalMax) * 100);
            result.status = result.total >= 80 ? 'GO' : result.total >= 60 ? 'CONDITIONAL' : 'AT RISK';
            return result;
        }

        function updateNextButton() {
            const currentQ = questions[currentQuestion];
            const selected = currentQ.querySelector('.option.selected');
            nextBtn.disabled = !selected;
            nextBtn.textContent = currentQuestion === totalQuestions - 1 ? 'Continue' : 'Next';
        }

        // Option selection
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const container = this.closest('.question-container');
                container.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                answers[currentQuestion] = parseInt(this.dataset.score);
                updateNextButton();
            });
        });

        // Navigation
        prevBtn.addEventListener('click', () => {
            if (leadForm.classList.contains('active')) {
                currentQuestion = totalQuestions - 1;
                showQuestion(currentQuestion);
                nextBtn.textContent = 'Continue';
            } else if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (leadForm.classList.contains('active')) {
                // Validate form
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const org = document.getElementById('organization').value;

                if (name && email && org) {
                    // Collect lead data
                    const leadData = {
                        name: name,
                        email: email,
                        organization: org,
                        role: document.getElementById('role').value,
                        ehr: document.getElementById('ehr').value
                    };

                    // Get scores and send email
                    const scoreData = getScoreData();
                    sendLeadEmail(leadData, scoreData);

                    showResults();
                } else {
                    alert('Please fill in all required fields.');
                }
            } else if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                showLeadForm();
            }
        });

        // Initialize
        showQuestion(0);
    </script>
</body>
</html>
